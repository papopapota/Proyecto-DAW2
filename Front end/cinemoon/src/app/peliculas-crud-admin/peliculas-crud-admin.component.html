<app-navbar></app-navbar>
<br>
<div class="mt-5 container">
    <div class="row">
            <div class="col-6 col-sm-4">
    <h1>Mantenimiento de Peliculas</h1>

    <div *ngIf="mensaje" class="alert alert-success" role="alert">
        {{ mensaje }}
      </div>
    <form  method="post" (ngSubmit)="registrarPelicula()">
        
        <div class="form-group">
            <label for="inputCod">Código</label> 
            <input type="idpelicula"  [(ngModel)]="newPelicula.idpelicula" 
                class="form-control" id="idpelicula" name="idpelicula" placeholder="Código">
        </div>
        <div class="form-group">
            <label for="titulo">Titulo</label> 
            <input type="text"  [(ngModel)]="newPelicula.titulo" 
                class="form-control" id="titulo" name="titulo"
                placeholder="Titulo">
        </div>
            <div class="form-group col-md-12">
                <label for="Descripcion">Descripcion</label> 
                <input type="text"  [(ngModel)]="newPelicula.descripcion" 
                    class="form-control" id="Descripcion" name="Descripcion" placeholder="Descripcion">
            </div>
            <div class="form-group col-md-12">
                <label for="imagen">Imagen</label> 
                <input type="text"   [(ngModel)]="newPelicula.imagen" 
                    class="form-control" id="imagen" name="imagen" placeholder="Imagen">
            </div>
        <div class="form-group">
            <label for="duracion">Duracion</label> 
            <input type="text"  [(ngModel)]="newPelicula.duracion" 
                class="form-control" id="duracion" name="duracion"
                placeholder="00:00:00">
        </div>
        <div class="form-group">
            <label for="idioma">Idioma</label> 
            <input type="text"   [(ngModel)]="newPelicula.idioma"
                class="form-control" id="idioma" name="idioma"
                placeholder="Idioma">
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="idGenero">Genero</label> 
                <select  id="idGenero" name="idGenero" class="form-control"  [(ngModel)]="newPelicula.idGenero" >
                    <option selected value="0">Seleccione...</option>
                    <option *ngFor="let genero of listaGeneros" [value]="genero.idGenero"  >{{ genero.nom_genero }}</option>
                </select>
                
            </div>
            <div class="form-group col-md-4 m-2">
                <label class="form-check-label" for="enestreno">Estreno</label>
                <input type="checkbox" class="form-check-input" id="enestreno" name="enestreno" [(ngModel)]=" newPelicula.enestreno">
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary">Registrar</button>
    </form>
    <div th:class="${cssmensaje}" th:text="${mensaje}"></div>
</div>
<div class="col-6 col-sm-7">
            <h3></h3>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Titulo</th>
                        <th>Descripcion</th>
                        <th>Imagen</th>
                        <th>Genero</th>
                        <th>Duracion</th>
                        <th>Idioma</th>
                        <th>Estreno</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let pelicula of peliculas">
                        <td>{{pelicula.idpelicula}}</td>
                        <td >{{pelicula.titulo}}</td>
                        <td >{{pelicula.descripcion}}</td>
                        <td >{{pelicula.imagen}}</td>
                        <td >{{pelicula.genero?.nom_genero}}</td>
                        <td >{{pelicula.duracion}}</td>
                        <td >{{pelicula.idioma}}</td>
                        <td >                
                            <input type="checkbox" class="form-check-input" id="enestreno" name="enestreno" [(ngModel)]=" pelicula.enestreno">
                        </td>
                        <td ><a (click)="buscarPelicula(pelicula.idpelicula)"  class="btn btn-outline-primary">Editar</a></td>
                        <td ><a (click)="eliminarPelicula(pelicula.idpelicula)"  class="btn btn-outline-danger">Eliminar</a></td>
                    
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>